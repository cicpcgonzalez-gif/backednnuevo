## Ejemplo de .env para el backend
# Copia este archivo a `.env` y ajusta la DATABASE_URL según tu hosting.
# Formato esperado (PostgreSQL):
# postgresql://DB_USER:DB_PASSWORD@DB_HOST:DB_PORT/DB_NAME?schema=public
# Nota: si tu contraseña tiene caracteres especiales, debes URL-encodificarlos (por ejemplo, '*' -> '%2A').

DATABASE_URL="postgresql://DB_USER:DB_PASSWORD@localhost:5432/DB_NAME?schema=public"
JWT_SECRET="tu_jwt_secret_aqui"

# Clave para cifrado AES (hex). Si se omite, se deriva desde JWT_SECRET (solo recomendado para desarrollo)
# Genera una con: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=

# --- Correo (SMTP o Resend) ---
# Si SMTP_PASS empieza con "re_" y no hay SMTP_USER/HOST configurados, el backend intentará enviar por Resend.
SMTP_HOST=
SMTP_PORT=
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
MAIL_FROM="\"MegaRifas\" <noreply@megarifasapp.com>"

# --- Reporte diario de auditoría (por correo) ---
# Activa el envío automático (usa cron dentro del backend)
AUDIT_REPORT_ENABLED=false
# Correos destino (separados por coma)
AUDIT_REPORT_EMAILS=
# Cron (por defecto: 1:00 AM Caracas)
AUDIT_REPORT_CRON=0 1 * * *
AUDIT_REPORT_TIMEZONE=America/Caracas
# Máximo de filas por reporte (para evitar adjuntos gigantes)
AUDIT_REPORT_MAX_ROWS=5000

# --- Imágenes (estándar de peso/tamaño) ---
# Límite máximo aceptado en subida multipart (antes de procesar). El resultado SIEMPRE se normaliza.
MAX_UPLOAD_BYTES=31457280
# Máximo de bytes del resultado JPEG final (lo que se guarda/retorna). Ej: 450KB.
IMAGE_MAX_BYTES=460800
# Dimensiones máximas (se mantiene proporción con fit=inside)
IMAGE_MAX_WIDTH=1400
IMAGE_MAX_HEIGHT=1400
# Calidad JPEG inicial (se reduce automáticamente si excede IMAGE_MAX_BYTES)
IMAGE_JPEG_QUALITY=78
# Mínimos de seguridad para poder cumplir el peso
IMAGE_MIN_DIM=320
IMAGE_MIN_QUALITY=25
IMAGE_MAX_ROUNDS=12

# --- KYC (Admins) ---
# Las imágenes KYC se procesan y se guardan cifradas en la base de datos (via DATABASE_URL).
# Ajusta estos límites si documentos quedan ilegibles o pesan demasiado.
KYC_IMAGE_MAX_BYTES=921600
KYC_IMAGE_MAX_WIDTH=1800
KYC_IMAGE_MAX_HEIGHT=1800
KYC_IMAGE_JPEG_QUALITY=82
KYC_IMAGE_MIN_DIM=640
KYC_IMAGE_MIN_QUALITY=35
KYC_IMAGE_MAX_ROUNDS=12

# --- Boost global (15 slots + cooldown semanal) ---
GLOBAL_BOOST_MAX_ACTIVE_USERS=15
GLOBAL_BOOST_COOLDOWN_DAYS=7
GLOBAL_BOOST_DURATION_HOURS=24
